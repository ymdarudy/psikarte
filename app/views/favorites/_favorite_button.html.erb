<div id="favorite_button_<%= p_test.id %>" class="favorite_button">
  <% unless current_user.favorites.find_by(psychology_test: p_test) %>
    <%= form_with(model: current_user.favorites.build(psychology_test: p_test), local: false)  do |f| %>
      <%= f.hidden_field :psychology_test_id %>
      <%= button_tag(type: "submit", class: "favorite-button fav-on ms-3") do %>
        <%= icon("star", class: "star") %>
      <% end %>
    <% end %>
  <% else %>
    <%= form_with(model: current_user.favorites.find_by(psychology_test: p_test), method: :delete, local: false) do |f| %>
      <%= button_tag(type: "submit", class: "favorite-button fav-off ms-3") do %>
        <%= icon("star-fill", class: "star star-fill") %>
      <% end %>
    <% end %>
  <% end %>
</div>
